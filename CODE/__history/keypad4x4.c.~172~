#include <keypad4x4.h>
#include<keypadcode.c>
#define lcd_enable_pin  PIN_E2
#define lcd_rs_pin      PIN_E0      
#define lcd_rw_pin      PIN_E1
#define lcd_data4       PIN_D4
#define lcd_data5       PIN_D5
#define lcd_data6       PIN_D6
#define lcd_data7       PIN_D7
#include <lcd.c>

//////////////////////////////////////////////
UNSIGNED INT8 CHUOI1[] = {"                "};

UNSIGNED INT16 a1, f,  g, m;
float a,b,c,d;


///////////////////////////////////////////////////////////////////

void main()
{  
   set_tris_D(0);    // D output
   set_tris_E(0);    // E output
   lcd_init();
 
LAP:
   KEY_4X4();
   if(MP!=0x0FF)
   {
      if(MP<11)
         {   m = m++;
         for(a1=0; a1<16; a1++)
            {
               CHUOI1[a1]=CHUOI1[a1+1];
               
               }
           
               CHUOI1[15]=MP+0x30;
               
      /////////////////////
               lcd_gotoxy(21,1);
               for (a1=0; a1<16; a1++)
               {lcd_putc(CHUOI1[a1]);}
               
               
                for(g=(15-m) ; g++)
            {
               CHUOI1[g]=CHUOI1[g] - 0x30;
               f = f + CHUOI1[g]*(10^(15-g));
                 lcd_gotoxy(21,2);
             printf(lcd_putc,"%ld", f);
            
              
         }
               }
          else if(MP==50)
          { 
          
          lcd_gotoxy(31,1);
            printf(lcd_putc,"50000");
             a = 50000;
             b = 22000;
             c = a/b;
             d = c/(2.25e-3);
             
                  }
          else if (MP==20)
          { 
           lcd_gotoxy(31,1);
            printf(lcd_putc,"20000");
             a = 20000;
             b = 22000;
             c = a/b;
             d = c/(2.25e-3);
             lcd_gotoxy(21,2);
             printf(lcd_putc,"%0.2f",d);
             
          }
          
                  
          else if (MP==100)
          { 
           lcd_gotoxy(31,1);
            printf(lcd_putc,"100000");
             a = 100000;
             b = 22000;
             c = a/b;
             d = c/(2.25e-3);
             lcd_gotoxy(21,2);
             printf(lcd_putc,"%0.2f",d);
             
          }
                  }
                  goto LAP;
                  }
          
          
          
          
          
          
   
////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////



