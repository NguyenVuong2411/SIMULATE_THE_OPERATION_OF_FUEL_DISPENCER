#include <hello.h>

char *SSID="Thuy";                  //your wifi
char *PASS="0908377688";                //your wifi
char *WEBSITE="api.thingspeak.com";  //your web
 
/***************************************************************/
#INT_RDA
void  RDA_isr(void) 
{

    
     //---------bat ki tu tat--------//
}
void ESP8266_init()
{
 printf("AT\r\n");delay_ms(500);
 printf("ATE0\r\n");delay_ms(500);
 printf("AT+CWMODE=1\r\n");delay_ms(500);
 printf("AT+CWJAP=\"%s\",\"%s\"\r\n",SSID,PASS);delay_ms(4000); // thay mat khau va tai khoan tuong ung
 printf("AT+CIPMUX=0\r\n");delay_ms(500);
}
void GET_StatusLED()
{
   unsigned int8 length; 
   
  sprintf(tien,"GET https://api.thingspeak.com/update?api_key=KX3VVF8T35C0WFPA&field2=%0.3f HTTP/1.1\r\nHost: api.thingspeak.com\r\nAConnection: keep-alive\r\n\r\n");
  printf("AT+CIPSTART=\"TCP\",\"%s\",80\r\n",WEBSITE);delay_ms(2000);  //wait connect
  length=300;
  printf("AT+CIPSEND=%i\r\n",length);delay_ms(500);
  printf(tien);delay_ms(1000);
  printf("AT+CIPCLOSE\r\n");delay_ms(200);
}
void uart()
{
   delay_ms(200);
   ESP8266_init();
   enable_interrupts(INT_RDA);
   
   GET_StatusLED();
   
}
